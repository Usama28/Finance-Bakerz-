<!DOCTYPE html>
<html lang="en">
    <head>
        <title>LOGIN</title>
        <!--firebase-->
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-firestore.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
            https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-analytics.js"></script>

        <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyAxQMWUM5N2il5VFHmb9763a-HPKjbYmxk",
            authDomain: "financeapp-3defb.firebaseapp.com",
            databaseURL: "https://financeapp-3defb.firebaseio.com",
            projectId: "financeapp-3defb",
            storageBucket: "financeapp-3defb.appspot.com",
            messagingSenderId: "815963685880",
            appId: "1:815963685880:web:7627a39481f2ff2cb1cc0d",
            measurementId: "G-6H9L6R4FHZ"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        </script>
      
      <!-- CSS only -->

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="signup.css">
    <!-- JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <style>
        #login-form
        {
            border: 1px solid transparent;
            margin-top: 3%;
            padding: 3% 6% 7% 6%;
            box-shadow: 0px 0px 10px -3px grey;
        }
    </style>

    <script>
        function loginForm()
        {
            var getMail=document.getElementById('email').value
            var getPassword=document.getElementById('password').value
            localStorage.setItem('storageMail',getMail)
            firebase.auth().signInWithEmailAndPassword(getMail, getPassword)
            .then(function(userResponse)
             {
                const userId = userResponse.user.uid
                localStorage.setItem('userId', userId)
                window.location.replace('../transaction/transaction.html')
            })
            .catch(function(error) 
            {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            // ...
                console.log(errorCode)
                console.log(errorMessage)
                let getError=document.createElement('div')
                getError.innerHTML=error
                getError.style.color='white'
                getError.style.backgroundColor='red'
                getError.style.padding='2%'
                getError.style.width='111%'
                document.getElementById('error-id').appendChild(getError)
                setTimeout(()=>getError.remove(),2000)
            });
           
        }
    </script>
    
</head>
    
    <body>
        <!--head-->
        <section class="sign-up "> 
            <div class="p-3">
                <a href="../index.html"><img src="../images/home-logo.png" class="px-4" ></a>
            </div>
        </section>

        <!--form section-->
        <section class=" container col-12 col-md-4">
            <div class=" border shadow my-5">
                <div class="row h-100 justify-content-center align-items-center">
                    <img src="../images/logo-withText.png" style="width: 35%;">
                </div>
                <div class="row h-100 justify-content-center align-items-center" id="main-form">
                    
                    <div>
                        <div class="form-control-group py-4">
                            <input type="text" placeholder="Email" class="form-bottom"  id="email" >
                        </div>
                        <div class="form-control-group py-4">
                            <input type="password" placeholder="Password" class="form-bottom" id="password" >
                        </div>
                        <div id="error-id">

                        </div>
                        
                        <div class="form-control-group py-4">
                            <button class="btn btn-warning text-light" id="login-btn" onclick="loginForm()"><i class="fa fa-unlock-alt"></i>  LOGIN</button>
                        </div>
                        <div class="form-control-group pt-2">
                            <a href="signup.html"><button class="btn btn-success mb-5" id="submit-btn" ><i class="fa fa-user-plus"></i>  REGISTER</button></a>
                        </div>
                    </div>

                </div>

            </div>
        </section>


        <!--footer-->
        <footer class="footer"> 
            <div class="container ">
                <p class="text-light pt-1">A Product Of AppBakerz</p>
            </div>
        </footer>
    </body>